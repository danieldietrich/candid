const p=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};p();function call(e,...t){return typeof e=="function"?e.apply(e,t):void 0}function getBaseUrl(){const e=document.head.querySelector("base");return e?e.href:document.URL}function extractBaseUrl(e){return e.substring(0,e.lastIndexOf("/"))+"/"}function createUrl(e,t){return t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/")?e.endsWith("/")?e+t.substring(1):e+t:e.endsWith("/")?e+t:e+"/"+t}function processWebComponents(e,t,s){t.querySelectorAll("web-component").forEach(o=>{try{const r=o.getAttribute("name"),n=o.getAttribute("mode"),c=parseProps(o.getAttribute("props")),i=o.querySelector("template"),a=createClass(e,i,n,c,s);customElements.define(r,a)}catch(r){console.error("[candid] Error processing web component:",o,r)}})}function parseProps(str){return str?eval("("+str+")"):{}}const __ctx=Symbol();function createClass(baseUrl,template,mode,props,componentProcessor){let processor,script;async function initialize(){if(template){processor||(processor=componentProcessor(baseUrl,template.content)),await processor,script||(script=[...template.content.querySelectorAll("script")].map(e=>e.parentNode.removeChild(e).textContent).join(`;
`));const root=mode==="open"||mode==="closed"?this.attachShadow({mode}):this;root.appendChild(template.content.cloneNode(!0));const ctx={element:this,root};Object.defineProperty(this,__ctx,{value:ctx}),function(){eval(script)}.bind(ctx)(),this.addEventListener("slotchange",ctx.onSlotChange),this.connectedCallback(),Object.entries(props).forEach(([e,t])=>this.attributeChangedCallback(e,null,t))}}class C extends HTMLElement{constructor(){super();Object.entries(props).forEach(([t,s])=>{let o=s;this.hasOwnProperty(t)&&(o=this[t],delete this[t]),createProperty(this,t,s),this.hasAttribute(t)||(this[t]=o)}),initialize.bind(this)()}static get observedAttributes(){return Object.keys(props)}connectedCallback(){var t;call((t=this[__ctx])==null?void 0:t.onMount)}disconnectedCallback(){var t;call((t=this[__ctx])==null?void 0:t.onUnmount)}attributeChangedCallback(t,s,o){var r;call((r=this[__ctx])==null?void 0:r.onUpdate,t,s,o)}adoptedCallback(){var t;call((t=this[__ctx])==null?void 0:t.onAdopt)}}return C}function createProperty(e,t,s){Object.defineProperty(e,t,typeof s=="boolean"?{get:()=>e.hasAttribute(t),set:r=>r?e.setAttribute(t,""):e.removeAttribute(t),enumerable:!0}:{get:()=>e.getAttribute(t),set:r=>r==null?e.removeAttribute(t):e.setAttribute(t,r),enumerable:!0})}async function processWebImports(e,t,s){const o=t.querySelectorAll("web-import");await Promise.allSettled([...o].map(async r=>{if(!r.getAttribute("status")){r.setAttribute("status","loading");try{const n=r.getAttribute("src"),c=createUrl(e,n),i=await fetch(c);if(i.ok){const a=await i.text(),l=document.createRange().createContextualFragment(a),u=extractBaseUrl(c);await s(u,l),r.parentNode.replaceChild(l,r)}else logError(r,`${i.status} ${i.statusText}`)}catch(n){logError(r,n)}}}))}function logError(e,t){console.error("[candid] web import error",e,t),e.setAttribute("status","error"),e.setAttribute("message",JSON.stringify(t))}async function candid(e){const{elementProcessor:t}=Object.assign({},e),s=async(o,r)=>{call(t,r),processWebComponents(o,r,s),await processWebImports(o,r,s)};await s(getBaseUrl(),document)}window.addEventListener("load",()=>candid());
